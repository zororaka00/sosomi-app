import{z as j,r as p,$ as Y,a as C,o as ee,t as te,L as v,D as a,a0 as se,F as m,E as t,B as c,C as s,Q as L,M as _,H as o,G as u,N as y,I as $,J as z,X as ae,K as i,Z as le,_ as oe}from"./index-DiyrpTSE.js";import{Q as S}from"./QImg-DPdUJfxc.js";import{C as B,A as ne,Q as R}from"./QTooltip-CAKvGxt-.js";import{u as re,Q as de,a as g,B as h}from"./search-store-BJWFpL6d.js";import{Q as N,a as Q,b as x}from"./QItem-Dc6L5wLM.js";import{u as ie}from"./bitcoin-store-BDM-WsTL.js";import{L as ue,W as M}from"./LoadingMonster-p3-yqGA9.js";import{P as ce}from"./PillButton-C-HBdToH.js";import{Q as me}from"./QrCodeDialog-C6syxe_u.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focusout-esBpzBkP.js";import"./escape-key-Dc1qi644.js";const ve={class:"page-content"},pe={key:0,class:"address-details fade-in"},_e={class:"page-header"},ge={class:"address-header"},he={class:"address-info"},xe={class:"balance-header"},be={class:"balance-amount"},Ce={class:"balance-value"},Be={key:0,class:"balance-usd text-grey-7 q-mt-sm"},Te={class:"stats-grid"},ke={class:"stat-item"},ye={class:"stat-value"},Se={class:"stat-item"},Qe={class:"stat-value"},qe={class:"stat-item"},we={class:"stat-value"},Ue={class:"stat-item"},Ae={class:"stat-value"},De={class:"card-title"},Fe={class:"q-ml-xs"},Ie={class:"q-ml-xs text-grey-7"},Ve={key:0,class:"text-center q-mt-md text-grey-6"},Le={class:"card-title"},$e={key:0},ze={key:1},Re={class:"text-grey-7 q-ml-xs"},Ne={class:"text-grey-7"},Me={key:0,class:"text-center q-mt-md text-grey-6"},Oe={key:1,class:"error-container fade-in"},Pe=j({__name:"BitcoinAddressDetail",setup(Ee){const O=se(),F=ae(),q=p(!1),n=ie(),T=Y(),P=re(),r=p(null),b=p([]),f=p([]),k=p(!1),w=p(null);let U=null;const E=C(()=>{const d=n.getQueueStatus();return d.queueLength>0?`Fetching... (${d.queueLength} requests in queue)`:"Fetching address data..."}),A=C(()=>r.value?n.calculateBalance(r.value):0),G=C(()=>r.value?r.value.chain_stats.tx_count+r.value.mempool_stats.tx_count:0),W=C(()=>r.value?r.value.chain_stats.funded_txo_sum+r.value.mempool_stats.funded_txo_sum:0),X=C(()=>r.value?r.value.chain_stats.spent_txo_sum+r.value.mempool_stats.spent_txo_sum:0),I=d=>{const e=n.calculateOutputTotal(d);return n.formatBTC(e)},V=d=>{F.push({name:"bitcoin-transaction",params:{txid:d}})},H=()=>{F.push({name:"home"})},J=()=>{r.value&&(q.value=!0)},K=async()=>{const d=O.params.address;k.value=!0,w.value=null;try{r.value=await n.getAddress(d),b.value=await n.getAddressTransactions(d),f.value=await n.getAddressUtxo(d),P.addSearch(d,"Address","bitcoin")}catch(e){console.error("Failed to load Bitcoin address:",e),w.value=e instanceof Error?e.message:"Failed to load address"}finally{k.value=!1}};return ee(async()=>{await K(),U=setInterval(()=>{if(k.value){const d=n.getQueueStatus();console.log(`Queue status: ${d.queueLength} pending`)}},500)}),te(()=>{U&&clearInterval(U)}),(d,e)=>(i(),v(de,{class:"bitcoin-address-page"},{default:a(()=>[k.value?(i(),v(ue,{key:0,message:E.value,onCancel:H},null,8,["message"])):m("",!0),t("div",ve,[r.value?(i(),c("div",pe,[t("div",_e,[s(L,{flat:"",round:"",icon:"mdi-arrow-left",onClick:e[0]||(e[0]=l=>d.$router.back()),class:"back-btn"}),e[3]||(e[3]=t("div",null,[t("h1",{class:"page-title"},"Bitcoin Address"),t("p",{class:"page-subtitle"},"Mainnet")],-1))]),s(h,{class:"address-card slide-up-soft",elevated:""},{default:a(()=>[s(g,null,{default:a(()=>[t("div",ge,[s(S,{src:B,width:"48px",height:"48px"}),t("div",he,[e[4]||(e[4]=t("div",{class:"address-label"},"Address",-1)),s(M,{color:"primary",address:r.value.address,"is-transaction-hash":!1,truncate:!0},null,8,["address"])]),s(L,{flat:"",round:"",icon:"mdi-qrcode",size:"md",color:"primary",onClick:J},{default:a(()=>[s(ne,null,{default:a(()=>[...e[5]||(e[5]=[_("Show QR",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),s(h,{class:"balance-card slide-up-soft stagger-1",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("div",xe,[e[6]||(e[6]=t("h3",{class:"card-title"},"Balance",-1)),s(S,{src:B,width:"24px",height:"24px"})]),t("div",be,[t("span",Ce,o(u(n).formatBTC(A.value)),1),e[7]||(e[7]=t("span",{class:"balance-symbol"},"BTC",-1))]),A.value>0?(i(),c("div",Be," ≈ "+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(A.value)),"BTC"))+" USD ",1)):m("",!0)]),_:1})]),_:1}),s(h,{class:"stats-card slide-up-soft stagger-2",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[e[12]||(e[12]=t("h3",{class:"card-title"},"Statistics",-1)),t("div",Te,[t("div",ke,[e[8]||(e[8]=t("div",{class:"stat-label"},"Total Transactions",-1)),t("div",ye,o(G.value),1)]),t("div",Se,[e[9]||(e[9]=t("div",{class:"stat-label"},"Total Received",-1)),t("div",Qe,o(u(n).formatBTC(W.value))+" BTC",1)]),t("div",qe,[e[10]||(e[10]=t("div",{class:"stat-label"},"Total Sent",-1)),t("div",we,o(u(n).formatBTC(X.value))+" BTC",1)]),t("div",Ue,[e[11]||(e[11]=t("div",{class:"stat-label"},"Unspent Outputs",-1)),t("div",Ae,o(f.value.length),1)])])]),_:1})]),_:1}),f.value.length>0?(i(),v(h,{key:0,class:"utxos-card slide-up-soft stagger-3",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("h3",De,[s(y,{name:"mdi-treasure-chest",size:"20px",color:"primary",class:"q-mr-sm"}),_(" Unspent Outputs ("+o(f.value.length)+") ",1)]),s(R,{separator:""},{default:a(()=>[(i(!0),c($,null,z(f.value.slice(0,10),(l,D)=>(i(),v(N,{key:D,class:"utxo-item"},{default:a(()=>[s(Q,null,{default:a(()=>[s(x,{class:"utxo-txid"},{default:a(()=>[s(M,{color:"primary",address:l.txid,"is-transaction-hash":!0,icon:"mdi-receipt-text",clickable:"",onClick:Z=>V(l.txid)},null,8,["address","onClick"])]),_:2},1024),s(x,{caption:"",class:"utxo-details"},{default:a(()=>[t("span",null,"Output #"+o(l.vout),1),e[13]||(e[13]=t("span",{class:"q-mx-sm"},"•",-1)),s(S,{src:B,width:"14px",height:"14px"}),t("strong",Fe,o(u(n).formatBTC(l.value))+" BTC",1),t("span",Ie,"("+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(l.value)),"BTC"))+" USD)",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),f.value.length>10?(i(),c("div",Ve," Showing 10 of "+o(f.value.length)+" UTXOs ",1)):m("",!0)]),_:1})]),_:1})):m("",!0),b.value.length>0?(i(),v(h,{key:1,class:"transactions-card slide-up-soft stagger-4",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("h3",Le,[s(y,{name:"mdi-swap-horizontal",size:"20px",color:"primary",class:"q-mr-sm"}),e[14]||(e[14]=_(" Recent Transactions ",-1))]),s(R,{separator:""},{default:a(()=>[(i(!0),c($,null,z(b.value.slice(0,10),(l,D)=>le((i(),v(N,{key:D,clickable:"",onClick:Z=>V(l.txid),class:"tx-item"},{default:a(()=>[s(Q,{avatar:""},{default:a(()=>[s(y,{name:l.status.confirmed?"mdi-check-circle":"mdi-clock-outline",color:l.status.confirmed?"positive":"warning",size:"32px"},null,8,["name","color"])]),_:2},1024),s(Q,null,{default:a(()=>[s(x,{class:"tx-txid"},{default:a(()=>[_(o(l.txid.substring(0,8))+"..."+o(l.txid.substring(l.txid.length-8)),1)]),_:2},1024),s(x,{caption:""},{default:a(()=>[l.status.block_time?(i(),c("span",$e,o(u(n).getTimeAgo(l.status.block_time)),1)):(i(),c("span",ze,"Unconfirmed"))]),_:2},1024)]),_:2},1024),s(Q,{side:""},{default:a(()=>[s(x,{class:"tx-value"},{default:a(()=>[s(S,{src:B,width:"16px",height:"16px"}),_(" "+o(I(l))+" BTC ",1),t("span",Re,"("+o(u(T).formatUsdValue(parseFloat(I(l)),"BTC"))+" USD)",1)]),_:2},1024),s(x,{caption:""},{default:a(()=>[_(" Fee: "+o(u(n).formatBTC(l.fee))+" BTC ",1),t("span",Ne,"("+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(l.fee)),"BTC"))+" USD)",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[oe]])),128))]),_:1}),b.value.length>10?(i(),c("div",Me," Showing 10 of "+o(b.value.length)+" transactions ",1)):m("",!0)]),_:1})]),_:1})):m("",!0)])):w.value?(i(),c("div",Oe,[s(h,{elevated:""},{default:a(()=>[s(g,{class:"text-center"},{default:a(()=>[s(y,{name:"mdi-alert-circle",size:"64px",color:"negative",class:"q-mb-md"}),e[15]||(e[15]=t("h3",{class:"text-h6 q-mb-sm"},"Address Not Found",-1)),s(ce,{label:"Go Back",icon:"mdi-arrow-left","bg-color":"#3b82f6","text-color":"#ffffff",onClick:e[1]||(e[1]=l=>d.$router.back())})]),_:1})]),_:1})])):m("",!0)]),r.value?(i(),v(me,{key:1,modelValue:q.value,"onUpdate:modelValue":e[2]||(e[2]=l=>q.value=l),address:r.value.address,"chain-name":"Bitcoin","chain-logo":u(B)},null,8,["modelValue","address","chain-logo"])):m("",!0)]),_:1}))}}),at=fe(Pe,[["__scopeId","data-v-d75dadcc"]]);export{at as default};
