import{z as W,Y as H,r as q,a as y,o as O,t as J,L as d,D as o,Z as K,F as v,E as t,B as f,C as e,Q as Y,_ as Z,H as r,G as c,M as m,N as x,I as F,J as $,S as j,K as l}from"./index-CdOfnMph.js";import{Q as B}from"./QImg-BraRF1f1.js";import{Q as X,a as _}from"./QSeparator-FBmUePdX.js";import{u as ee,Q as se,a as g,B as h}from"./search-store-BzIiXSqb.js";import{Q as z,a as D,b as p}from"./QItem-B4nvqyaI.js";import{B as C,Q as V}from"./bitcoin-Da4x5qa8.js";import{u as te}from"./bitcoin-store-3gFLD2kJ.js";import{L as ae,W as I}from"./LoadingMonster-Bp6dhlzt.js";import{P as oe}from"./PillButton-eCAYzmn7.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focusout-BFBXbN0A.js";const re={class:"page-content"},ie={key:0,class:"transaction-details fade-in"},ne={class:"page-header"},ue={class:"status-text"},ce={class:"info-row"},de={class:"info-value"},fe={class:"info-row"},ve={class:"info-value value-amount"},me={key:0,class:"info-usd text-grey-7"},pe={class:"info-row"},_e={class:"info-value"},ge={key:0,class:"info-usd text-grey-7"},he={key:1,class:"info-row"},be={class:"info-value mono-text"},ke={key:3,class:"info-row"},ye={class:"info-value"},xe={class:"text-grey-6"},Be={class:"info-row"},Ce={class:"info-value mono-text"},Te={class:"info-row"},we={class:"info-value"},Se={class:"card-title"},Qe={key:1,class:"text-grey-6"},qe={class:"card-title"},Fe={key:1,class:"text-grey-6"},Ie={key:1,class:"error-container fade-in"},Ue=W({__name:"BitcoinTransactionDetail",setup(Le){const N=K(),U=j(),n=te(),b=H(),M=ee(),s=q(null),k=q(!1),T=q(null);let w=null;const A=y(()=>{const u=n.getQueueStatus();return u.queueLength>0?`Fetching... (${u.queueLength} requests in queue)`:"Fetching transaction data..."});y(()=>s.value?n.calculateInputTotal(s.value):0);const S=y(()=>s.value?n.calculateOutputTotal(s.value):0),P=y(()=>{if(!s.value||s.value.weight===0)return"0";const u=s.value.weight/4;return(s.value.fee/u).toFixed(2)}),L=u=>{U.push({name:"bitcoin-address",params:{address:u}})},R=()=>{U.push({name:"home"})},E=async()=>{const u=N.params.txid;k.value=!0,T.value=null;try{s.value=await n.getTransaction(u),M.addSearch(u,"Transaction","bitcoin")}catch(a){console.error("Failed to load Bitcoin transaction:",a),T.value=a instanceof Error?a.message:"Failed to load transaction"}finally{k.value=!1}};return O(async()=>{await E(),w=setInterval(()=>{if(k.value){const u=n.getQueueStatus();console.log(`Queue status: ${u.queueLength} pending`)}},500)}),J(()=>{w&&clearInterval(w)}),(u,a)=>(l(),d(se,{class:"bitcoin-transaction-page"},{default:o(()=>[k.value?(l(),d(ae,{key:0,message:A.value,onCancel:R},null,8,["message"])):v("",!0),t("div",re,[s.value?(l(),f("div",ie,[t("div",ne,[e(Y,{flat:"",round:"",icon:"mdi-arrow-left",onClick:a[0]||(a[0]=i=>u.$router.back()),class:"back-btn"}),a[2]||(a[2]=t("div",null,[t("h1",{class:"page-title"},"Bitcoin Transaction"),t("p",{class:"page-subtitle"},"Mainnet")],-1))]),e(h,{class:"status-card slide-up-soft",elevated:""},{default:o(()=>[e(g,{class:"status-content"},{default:o(()=>[e(B,{src:C,width:"56px",height:"56px"}),t("div",ue,[a[3]||(a[3]=t("div",{class:"status-label"},"Status",-1)),t("div",{class:Z(["status-value",`status-value--${s.value.status.confirmed?"confirmed":"pending"}`])},r(s.value.status.confirmed?"Confirmed":"Unconfirmed"),3)]),s.value.status.confirmed&&s.value.status.block_height?(l(),d(X,{key:0,color:"primary",label:`Block ${s.value.status.block_height}`,class:"confirmations-badge"},null,8,["label"])):v("",!0)]),_:1})]),_:1}),e(h,{class:"info-card slide-up-soft stagger-1",bordered:""},{default:o(()=>[e(g,null,{default:o(()=>[t("div",ce,[a[4]||(a[4]=t("div",{class:"info-label"},"Transaction ID",-1)),t("div",de,[e(I,{color:"primary",address:s.value.txid,"is-transaction-hash":!0,icon:"mdi-receipt-text"},null,8,["address"])])]),e(_,{class:"info-separator"}),t("div",fe,[a[5]||(a[5]=t("div",{class:"info-label"},"Amount",-1)),t("div",ve,[e(B,{src:C,width:"20px",height:"20px"}),t("span",null,r(c(n).formatBTC(S.value))+" BTC",1)]),S.value>0?(l(),f("div",me," ≈ "+r(c(b).formatUsdValue(parseFloat(c(n).formatBTC(S.value)),"BTC"))+" USD ",1)):v("",!0)]),e(_,{class:"info-separator"}),t("div",pe,[a[6]||(a[6]=t("div",{class:"info-label"},"Fee",-1)),t("div",_e,r(c(n).formatBTC(s.value.fee))+" BTC ",1),s.value.fee>0?(l(),f("div",ge," ≈ "+r(c(b).formatUsdValue(parseFloat(c(n).formatBTC(s.value.fee)),"BTC"))+" USD ",1)):v("",!0)]),s.value.status.block_height?(l(),d(_,{key:0,class:"info-separator"})):v("",!0),s.value.status.block_height?(l(),f("div",he,[a[7]||(a[7]=t("div",{class:"info-label"},"Block Height",-1)),t("div",be,r(s.value.status.block_height),1)])):v("",!0),s.value.status.block_time?(l(),d(_,{key:2,class:"info-separator"})):v("",!0),s.value.status.block_time?(l(),f("div",ke,[a[8]||(a[8]=t("div",{class:"info-label"},"Timestamp",-1)),t("div",ye,[m(r(c(n).formatTimestamp(s.value.status.block_time))+"  ",1),t("span",xe," ("+r(c(n).getTimeAgo(s.value.status.block_time))+") ",1)])])):v("",!0),e(_,{class:"info-separator"}),t("div",Be,[a[9]||(a[9]=t("div",{class:"info-label"},"Size",-1)),t("div",Ce,r(s.value.size)+" bytes ("+r(s.value.weight)+" WU) ",1)]),e(_,{class:"info-separator"}),t("div",Te,[a[10]||(a[10]=t("div",{class:"info-label"},"Fee Rate",-1)),t("div",we,r(P.value)+" sat/vB ",1)])]),_:1})]),_:1}),e(h,{class:"inputs-card slide-up-soft stagger-2",bordered:""},{default:o(()=>[e(g,null,{default:o(()=>[t("h3",Se,[e(x,{name:"mdi-arrow-down-circle",size:"20px",color:"negative",class:"q-mr-sm"}),m(" Inputs ("+r(s.value.vin.length)+") ",1)]),e(V,{separator:""},{default:o(()=>[(l(!0),f(F,null,$(s.value.vin,(i,Q)=>(l(),d(z,{key:Q,class:"input-item"},{default:o(()=>[e(D,null,{default:o(()=>[i.is_coinbase?(l(),d(p,{key:0,class:"coinbase-label"},{default:o(()=>[e(x,{name:"mdi-star",color:"warning",size:"16px",class:"q-mr-xs"}),a[11]||(a[11]=m(" Coinbase (Newly Generated Coins) ",-1))]),_:1})):(l(),f(F,{key:1},[e(p,{class:"input-address"},{default:o(()=>[i.prevout?.scriptpubkey_address?(l(),d(I,{key:0,color:"negative",address:i.prevout.scriptpubkey_address,"is-transaction-hash":!1,truncate:!0,icon:"mdi-wallet",clickable:"",onClick:G=>L(i.prevout.scriptpubkey_address)},null,8,["address","onClick"])):(l(),f("span",Qe,"Unknown"))]),_:2},1024),e(p,{caption:"",class:"input-value"},{default:o(()=>[e(B,{src:C,width:"14px",height:"14px",class:"q-mr-xs"}),m(" "+r(i.prevout?c(n).formatBTC(i.prevout.value):"0")+" BTC ",1)]),_:2},1024),i.prevout?(l(),d(p,{key:0,caption:"",class:"text-grey-7 q-mt-xs"},{default:o(()=>[m(" ≈ "+r(c(b).formatUsdValue(parseFloat(c(n).formatBTC(i.prevout.value)),"BTC"))+" USD ",1)]),_:2},1024)):v("",!0)],64))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(h,{class:"outputs-card slide-up-soft stagger-3",bordered:""},{default:o(()=>[e(g,null,{default:o(()=>[t("h3",qe,[e(x,{name:"mdi-arrow-up-circle",size:"20px",color:"positive",class:"q-mr-sm"}),m(" Outputs ("+r(s.value.vout.length)+") ",1)]),e(V,{separator:""},{default:o(()=>[(l(!0),f(F,null,$(s.value.vout,(i,Q)=>(l(),d(z,{key:Q,class:"output-item"},{default:o(()=>[e(D,null,{default:o(()=>[e(p,{class:"output-address"},{default:o(()=>[i.scriptpubkey_address?(l(),d(I,{key:0,color:"positive",address:i.scriptpubkey_address,"is-transaction-hash":!1,truncate:!0,icon:"mdi-wallet",clickable:"",onClick:G=>L(i.scriptpubkey_address)},null,8,["address","onClick"])):(l(),f("span",Fe,r(i.scriptpubkey_type),1))]),_:2},1024),e(p,{caption:"",class:"output-value"},{default:o(()=>[e(B,{src:C,width:"14px",height:"14px",class:"q-mr-xs"}),m(" "+r(c(n).formatBTC(i.value))+" BTC ",1)]),_:2},1024),e(p,{caption:"",class:"text-grey-7 q-mt-xs"},{default:o(()=>[m(" ≈ "+r(c(b).formatUsdValue(parseFloat(c(n).formatBTC(i.value)),"BTC"))+" USD ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):T.value?(l(),f("div",Ie,[e(h,{elevated:""},{default:o(()=>[e(g,{class:"text-center"},{default:o(()=>[e(x,{name:"mdi-alert-circle",size:"64px",color:"negative",class:"q-mb-md"}),a[12]||(a[12]=t("h3",{class:"text-h6 q-mb-sm"},"Transaction Not Found",-1)),e(oe,{label:"Go Back",icon:"mdi-arrow-left","bg-color":"#3b82f6","text-color":"#ffffff",onClick:a[1]||(a[1]=i=>u.$router.back())})]),_:1})]),_:1})])):v("",!0)])]),_:1}))}}),We=le(Ue,[["__scopeId","data-v-b44a4a06"]]);export{We as default};
