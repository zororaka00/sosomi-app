import{Q as A,a as E,W as L,b as P}from"./WalletAddressChip-WHn5HU_H.js";import{u as M,Q as U,a as p,B as f}from"./search-store-BMlNHoxT.js";import{C as F,a as T,E as u,N as r,H as e,O as _,I as b,F as s,G as n,K as c,a3 as W,R as h,D as G,r as S,o as H,a1 as J,J as v,L as $,M as B,Q,S as I,X as K,P as O}from"./index-Bxr7GWuq.js";import{Q as X}from"./QList-BntsQ8hJ.js";import{Q as j}from"./QInput-DrocVAv4.js";import{_ as R,A as Y,D as Z}from"./_plugin-vue_export-helper-i8foX6Ho.js";import"./focusout-D2K-PoL_.js";const ee={class:"token-row__icon"},se={class:"text-subtitle1"},ae={class:"token-row__info"},te={class:"token-row__name"},oe={class:"token-row__subtitle"},ne={class:"token-row__balance"},le={class:"token-row__amount"},de={key:0,class:"token-row__usd"},re=F({__name:"TokenRow",props:{token:{},usdValue:{},clickable:{type:Boolean,default:!1}},emits:["click"],setup(m,{emit:C}){const l=m,x=C,g=T(()=>l.token.symbol.charAt(0).toUpperCase()),w=T(()=>{const t=["primary","secondary","positive","info","warning"],k=l.token.symbol.charCodeAt(0)%t.length;return t[k]}),y=T(()=>{const t=parseFloat(l.token.balance);return t===0?"0":t<1e-8?"< 0.00000001":t<1?t.toFixed(8):t<1e3?t.toFixed(Math.min(8,2)):t.toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:0})}),i=()=>{l.clickable&&x("click")};return(t,k)=>(r(),u("div",{class:"token-row",onClick:i},[e("div",ee,[s(W,{size:"40px",color:w.value,"text-color":"white"},{default:n(()=>[e("span",se,c(g.value),1)]),_:1},8,["color"])]),e("div",ae,[e("div",te,c(m.token.symbol),1),e("div",oe,c(m.token.name),1)]),e("div",ne,[e("div",le,c(y.value),1),m.usdValue?(r(),u("div",de,"$"+c(m.usdValue),1)):b("",!0)]),m.clickable?(r(),_(h,{key:0,name:"chevron_right",size:"20px",color:"grey-5"})):b("",!0)]))}}),ie=R(re,[["__scopeId","data-v-f88c46c1"]]),ce={class:"page-content"},ue={key:0,class:"loading-container fade-in"},me={key:1,class:"address-details fade-in"},ve={class:"page-header"},ke={class:"page-subtitle"},pe={class:"address-header"},fe={class:"address-info"},_e={class:"balance-header"},he={class:"balance-amount"},be={class:"balance-value"},ge={class:"balance-symbol"},ye={key:0,class:"saved-tokens-section"},Ce={class:"saved-tokens-chips"},xe={class:"add-token-form"},we={key:2,class:"error-container fade-in"},Ae={class:"text-grey-7 q-mb-lg"},Te=F({__name:"AddressDetail",setup(m){const C=J();K();const l=Y(),x=M(),{currentChain:g,loading:w,error:y}=G(l),i=S(null),t=S(""),k=S(!1),V=d=>Z(d),D=async()=>{const d=C.params.address;try{x.addSearch(d,"Address",l.currentChainId),i.value=await l.getWalletInfo(d)}catch(a){console.error("Failed to load address info:",a)}},N=async()=>{if(!(!i.value||!t.value)){k.value=!0;try{const d=await l.getTokenBalance(t.value,i.value.address);i.value.tokens.push(d),l.addSavedToken(t.value,d.symbol,l.currentChainId),I.create({message:`Added ${d.symbol}`,color:"positive",icon:"mdi-check-circle",position:"top",timeout:2e3}),t.value=""}catch{I.create({message:"Failed to add token. Please check the address.",color:"negative",icon:"mdi-alert-circle",position:"top",timeout:3e3})}finally{k.value=!1}}},q=d=>{l.removeSavedToken(d,l.currentChainId),I.create({message:"Token removed from saved list",color:"info",icon:"mdi-delete",position:"top",timeout:2e3})};return H(()=>{D()}),(d,a)=>(r(),_(U,{class:"address-page"},{default:n(()=>[e("div",ce,[v(w)?(r(),u("div",ue,[s(f,{elevated:""},{default:n(()=>[s(p,null,{default:n(()=>[s(A,{type:"text",width:"40%",height:"30px",class:"q-mb-md"}),s(A,{type:"text",width:"60%",height:"20px",class:"q-mb-lg"}),s(E,{class:"q-mb-lg"}),(r(),u($,null,B(4,o=>s(A,{key:o,type:"text",height:"60px",class:"q-mb-sm"})),64))]),_:1})]),_:1})])):i.value?(r(),u("div",me,[e("div",ve,[s(Q,{flat:"",round:"",icon:"mdi-arrow-left",onClick:a[0]||(a[0]=o=>d.$router.back()),class:"back-btn"}),e("div",null,[a[3]||(a[3]=e("h1",{class:"page-title"},"Address Detail",-1)),e("p",ke,c(v(g)?.name),1)])]),s(f,{class:"address-card slide-up-soft",elevated:""},{default:n(()=>[s(p,null,{default:n(()=>[e("div",pe,[s(h,{name:"mdi-wallet",size:"48px",color:"primary"}),e("div",fe,[a[4]||(a[4]=e("div",{class:"address-label"},"Address",-1)),s(L,{color:"primary",address:i.value.address,"is-transaction-hash":!0},null,8,["address"])])])]),_:1})]),_:1}),s(f,{class:"balance-card slide-up-soft stagger-1",bordered:""},{default:n(()=>[s(p,null,{default:n(()=>[e("div",_e,[a[5]||(a[5]=e("h3",{class:"card-title"},"Native Balance",-1)),s(h,{name:"mdi-cash",size:"24px",color:"primary"})]),e("div",he,[e("span",be,c(i.value.formattedBalance),1),e("span",ge,c(v(g)?.chain.nativeCurrency.symbol),1)])]),_:1})]),_:1}),i.value.tokens.length>0?(r(),_(f,{key:0,class:"tokens-card slide-up-soft stagger-2",bordered:""},{default:n(()=>[s(p,null,{default:n(()=>[a[6]||(a[6]=e("h3",{class:"card-title"},"Token Balances",-1)),s(X,{separator:""},{default:n(()=>[(r(!0),u($,null,B(i.value.tokens,o=>(r(),_(ie,{key:o.address,token:{symbol:o.symbol,name:o.name,balance:o.formattedBalance},clickable:""},null,8,["token"]))),128))]),_:1})]),_:1})]),_:1})):b("",!0),s(f,{class:"add-token-card slide-up-soft stagger-4",bordered:""},{default:n(()=>[s(p,null,{default:n(()=>[a[8]||(a[8]=e("h3",{class:"card-title"},"Add Custom Token",-1)),a[9]||(a[9]=e("p",{class:"card-subtitle"}," Enter an ERC20 token contract address to check its balance for this address ",-1)),v(l).currentChainSavedTokens.length>0?(r(),u("div",ye,[a[7]||(a[7]=e("div",{class:"saved-tokens-title"},"Previously Added Tokens:",-1)),e("div",Ce,[(r(!0),u($,null,B(v(l).currentChainSavedTokens,o=>(r(),_(P,{key:o.address,clickable:"",outline:"",color:"primary",icon:"mdi-coin",onClick:z=>t.value=o.address,removable:"",onRemove:z=>q(o.address),class:"saved-token-chip"},{default:n(()=>[O(c(o.symbol),1)]),_:2},1032,["onClick","onRemove"]))),128))])])):b("",!0),e("div",xe,[s(j,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value=o),outlined:"",placeholder:"Enter token contract address",label:"Token Address",rules:[o=>!o||V(o)||"Invalid address"]},{prepend:n(()=>[s(h,{name:"mdi-coin"})]),_:1},8,["modelValue","rules"]),s(Q,{unelevated:"",rounded:"",color:"primary",label:"Add Token","icon-right":"mdi-plus","no-caps":"",loading:k.value,disable:!t.value||!V(t.value),onClick:N,class:"add-token-btn"},null,8,["loading","disable"])])]),_:1})]),_:1})])):v(y)?(r(),u("div",we,[s(f,{elevated:""},{default:n(()=>[s(p,{class:"text-center"},{default:n(()=>[s(h,{name:"mdi-alert-circle",size:"64px",color:"negative",class:"q-mb-md"}),a[10]||(a[10]=e("h3",{class:"text-h6 q-mb-sm"},"Address Not Found",-1)),e("p",Ae,c(v(y)),1),s(Q,{unelevated:"",rounded:"",color:"primary",label:"Go Back",icon:"mdi-arrow-left",onClick:a[2]||(a[2]=o=>d.$router.back())})]),_:1})]),_:1})])):b("",!0)])]),_:1}))}}),Re=R(Te,[["__scopeId","data-v-f319d815"]]);export{Re as default};
