import{z as P,a as y,B as m,K as r,E as a,L as k,F as v,C as s,D as n,H as c,$ as G,N as C,Y as H,A as J,r as g,o as K,Z as O,G as _,Q as F,M as I,I as D,J as R,S as Y,O as Q}from"./index-CdOfnMph.js";import{u as Z,Q as j,a as h,b as X,B as b}from"./search-store-BzIiXSqb.js";import{Q as ee}from"./bitcoin-Da4x5qa8.js";import{L as ae,W as se,Q as te}from"./LoadingMonster-Bp6dhlzt.js";import{u as oe,a as le}from"./chain-store-B5bYJ3TH.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as N}from"./PillButton-eCAYzmn7.js";import{P as ne}from"./PillInput-CGPethOm.js";import{_ as re}from"./QrCodeDialog.vue_vue_type_script_setup_true_lang-CVZ-lMRR.js";import"./focusout-BFBXbN0A.js";import"./escape-key-C3-SP3ek.js";const de={class:"token-row__icon"},ie={class:"text-subtitle1"},ce={class:"token-row__info"},ue={class:"token-row__name"},me={class:"token-row__subtitle"},ve={class:"token-row__balance"},fe={class:"token-row__amount"},ke={key:0,class:"token-row__usd"},pe=P({__name:"TokenRow",props:{token:{},usdValue:{},clickable:{type:Boolean,default:!1}},emits:["click"],setup(f,{emit:w}){const p=f,i=w,x=y(()=>p.token.symbol.charAt(0).toUpperCase()),S=y(()=>{const t=["primary","secondary","positive","info","warning"],l=p.token.symbol.charCodeAt(0)%t.length;return t[l]}),B=y(()=>{const t=parseFloat(p.token.balance);return t===0?"0":t<1e-8?"< 0.00000001":t<1?t.toFixed(8):t<1e3?t.toFixed(Math.min(8,2)):t.toLocaleString("en-US",{maximumFractionDigits:8,minimumFractionDigits:0})}),A=()=>{p.clickable&&i("click")};return(t,l)=>(r(),m("div",{class:"token-row",onClick:A},[a("div",de,[s(G,{size:"40px",color:S.value,"text-color":"white"},{default:n(()=>[a("span",ie,c(x.value),1)]),_:1},8,["color"])]),a("div",ce,[a("div",ue,c(f.token.symbol),1),a("div",me,c(f.token.name),1)]),a("div",ve,[a("div",fe,c(B.value),1),f.usdValue?(r(),m("div",ke,"$"+c(f.usdValue),1)):v("",!0)]),f.clickable?(r(),k(C,{key:0,name:"chevron_right",size:"20px",color:"grey-5"})):v("",!0)]))}}),_e=z(pe,[["__scopeId","data-v-f88c46c1"]]),he={class:"page-content"},be={key:0,class:"address-details fade-in"},ge={class:"page-header"},ye={class:"page-subtitle"},Ce={class:"address-header"},we={class:"address-info"},xe={class:"balance-header"},Se={class:"balance-amount"},Be={class:"balance-value"},Ae={class:"balance-symbol"},Te={key:0,class:"balance-usd text-grey-7 q-mt-sm"},$e={key:0,class:"saved-tokens-section"},Qe={class:"saved-tokens-chips"},Ve={class:"add-token-form"},Fe={key:1,class:"error-container fade-in"},Ie=P({__name:"AddressDetail",setup(f){const w=O(),p=Y(),i=oe(),x=Z(),S=H(),{loading:B,error:A}=J(i),t=y(()=>i.currentChain),l=g(null),u=g(""),T=g(!1),$=g(!1),V=d=>le(d),L=()=>{p.push({name:"home"})},U=()=>{l.value&&($.value=!0)},E=async()=>{const d=w.params.address;try{l.value=await i.getWalletInfo(d),x.addSearch(d,"Address",i.currentChainId)}catch(e){console.error("Failed to load address info:",e)}},q=async()=>{if(!(!l.value||!u.value)){T.value=!0;try{const d=await i.getTokenBalance(u.value,l.value.address);l.value.tokens.push(d),i.addSavedToken(u.value,d.symbol,i.currentChainId),Q.create({message:`Added ${d.symbol}`,color:"positive",icon:"mdi-check-circle",position:"top",timeout:2e3}),u.value=""}catch{Q.create({message:"Failed to add token. Please check the address.",color:"negative",icon:"mdi-alert-circle",position:"top",timeout:3e3})}finally{T.value=!1}}},M=d=>{i.removeSavedToken(d,i.currentChainId),Q.create({message:"Token removed from saved list",color:"info",icon:"mdi-delete",position:"top",timeout:2e3})};return K(()=>{E()}),(d,e)=>(r(),k(j,{class:"address-page"},{default:n(()=>[_(B)?(r(),k(ae,{key:0,message:"Fetching address data...",onCancel:L})):v("",!0),a("div",he,[l.value?(r(),m("div",be,[a("div",ge,[s(F,{flat:"",round:"",icon:"mdi-arrow-left",onClick:e[0]||(e[0]=o=>d.$router.back()),class:"back-btn"}),a("div",null,[e[4]||(e[4]=a("h1",{class:"page-title"},"Address Detail",-1)),a("p",ye,c(t.value?.name),1)])]),s(b,{class:"address-card slide-up-soft",elevated:""},{default:n(()=>[s(h,null,{default:n(()=>[a("div",Ce,[s(C,{name:"mdi-wallet",size:"48px",color:"primary"}),a("div",we,[e[5]||(e[5]=a("div",{class:"address-label"},"Address",-1)),s(se,{color:"primary",address:l.value.address,"is-transaction-hash":!1,truncate:!0},null,8,["address"])]),s(F,{flat:"",round:"",icon:"mdi-qrcode",size:"md",color:"primary",onClick:U},{default:n(()=>[s(X,null,{default:n(()=>[...e[6]||(e[6]=[I("Show QR",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),s(b,{class:"balance-card slide-up-soft stagger-1",bordered:""},{default:n(()=>[s(h,null,{default:n(()=>[a("div",xe,[e[7]||(e[7]=a("h3",{class:"card-title"},"Native Balance",-1)),s(C,{name:"mdi-cash",size:"24px",color:"primary"})]),a("div",Se,[a("span",Be,c(l.value.formattedBalance),1),a("span",Ae,c(t.value?.chain.nativeCurrency.symbol),1)]),parseFloat(l.value.formattedBalance)>0?(r(),m("div",Te," â‰ˆ "+c(_(S).formatUsdValue(parseFloat(l.value.formattedBalance),t.value?.chain.nativeCurrency.symbol||""))+" USD ",1)):v("",!0)]),_:1})]),_:1}),l.value.tokens.length>0?(r(),k(b,{key:0,class:"tokens-card slide-up-soft stagger-2",bordered:""},{default:n(()=>[s(h,null,{default:n(()=>[e[8]||(e[8]=a("h3",{class:"card-title"},"Token Balances",-1)),s(ee,{separator:""},{default:n(()=>[(r(!0),m(D,null,R(l.value.tokens,o=>(r(),k(_e,{key:o.address,token:{symbol:o.symbol,name:o.name,balance:o.formattedBalance},clickable:""},null,8,["token"]))),128))]),_:1})]),_:1})]),_:1})):v("",!0),s(b,{class:"add-token-card slide-up-soft stagger-4",bordered:""},{default:n(()=>[s(h,null,{default:n(()=>[e[10]||(e[10]=a("h3",{class:"card-title"},"Add Custom Token",-1)),e[11]||(e[11]=a("p",{class:"card-subtitle"}," Enter an ERC20 token contract address to check its balance for this address ",-1)),_(i).currentChainSavedTokens.length>0?(r(),m("div",$e,[e[9]||(e[9]=a("div",{class:"saved-tokens-title"},"Previously Added Tokens:",-1)),a("div",Qe,[(r(!0),m(D,null,R(_(i).currentChainSavedTokens,o=>(r(),k(te,{key:o.address,clickable:"",outline:"",color:"primary",icon:"mdi-coin",onClick:W=>u.value=o.address,removable:"",onRemove:W=>M(o.address),class:"saved-token-chip"},{default:n(()=>[I(c(o.symbol),1)]),_:2},1032,["onClick","onRemove"]))),128))])])):v("",!0),a("div",Ve,[s(ne,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),placeholder:"Enter token contract address","prepend-icon":"mdi-coin","bg-color":"#fafafa","text-color":"#111827",rules:[o=>!o||V(o.toString())||"Invalid address"]},null,8,["modelValue","rules"]),s(N,{label:"Add Token",icon:"mdi-plus","bg-color":"#3b82f6","text-color":"#ffffff",disabled:!u.value||!V(u.value)||T.value,onClick:q,class:"add-token-btn"},null,8,["disabled"])])]),_:1})]),_:1})])):_(A)?(r(),m("div",Fe,[s(b,{elevated:""},{default:n(()=>[s(h,{class:"text-center"},{default:n(()=>[s(C,{name:"mdi-alert-circle",size:"64px",color:"negative",class:"q-mb-md"}),e[12]||(e[12]=a("h3",{class:"text-h6 q-mb-sm"},"Address Not Found",-1)),s(N,{label:"Go Back",icon:"mdi-arrow-left","bg-color":"#3b82f6","text-color":"#ffffff",onClick:e[2]||(e[2]=o=>d.$router.back())})]),_:1})]),_:1})])):v("",!0)]),l.value&&t.value?(r(),k(re,{key:1,modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=o=>$.value=o),address:l.value.address,"chain-name":t.value.name,"chain-logo":t.value.iconUrl},null,8,["modelValue","address","chain-name","chain-logo"])):v("",!0)]),_:1}))}}),Ge=z(Ie,[["__scopeId","data-v-7aafc147"]]);export{Ge as default};
