import{z as Z,r as p,Y as j,a as B,o as ee,t as te,L as v,D as a,Z as se,F as m,E as t,B as c,C as s,Q as L,M as _,H as o,G as u,N as y,I as $,J as z,S as ae,K as d,V as le,X as oe}from"./index-CdOfnMph.js";import{Q as S}from"./QImg-BraRF1f1.js";import{u as ne,Q as re,a as g,b as ie,B as h}from"./search-store-BzIiXSqb.js";import{Q as R,a as Q,b}from"./QItem-B4nvqyaI.js";import{B as C,Q as N}from"./bitcoin-Da4x5qa8.js";import{u as de}from"./bitcoin-store-3gFLD2kJ.js";import{L as ue,W as M}from"./LoadingMonster-Bp6dhlzt.js";import{P as ce}from"./PillButton-eCAYzmn7.js";import{_ as me}from"./QrCodeDialog.vue_vue_type_script_setup_true_lang-CVZ-lMRR.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./focusout-BFBXbN0A.js";import"./escape-key-C3-SP3ek.js";const ve={class:"page-content"},pe={key:0,class:"address-details fade-in"},_e={class:"page-header"},ge={class:"address-header"},he={class:"address-info"},be={class:"balance-header"},xe={class:"balance-amount"},Be={class:"balance-value"},Ce={key:0,class:"balance-usd text-grey-7 q-mt-sm"},Te={class:"stats-grid"},ke={class:"stat-item"},ye={class:"stat-value"},Se={class:"stat-item"},Qe={class:"stat-value"},qe={class:"stat-item"},we={class:"stat-value"},Ue={class:"stat-item"},Ve={class:"stat-value"},Ae={class:"card-title"},Fe={class:"q-ml-xs"},Ie={class:"q-ml-xs text-grey-7"},De={key:0,class:"text-center q-mt-md text-grey-6"},Le={class:"card-title"},$e={key:0},ze={key:1},Re={class:"text-grey-7 q-ml-xs"},Ne={class:"text-grey-7"},Me={key:0,class:"text-center q-mt-md text-grey-6"},Oe={key:1,class:"error-container fade-in"},Pe=Z({__name:"BitcoinAddressDetail",setup(Ee){const O=se(),F=ae(),q=p(!1),n=de(),T=j(),P=ne(),r=p(null),x=p([]),f=p([]),k=p(!1),w=p(null);let U=null;const E=B(()=>{const i=n.getQueueStatus();return i.queueLength>0?`Fetching... (${i.queueLength} requests in queue)`:"Fetching address data..."}),V=B(()=>r.value?n.calculateBalance(r.value):0),G=B(()=>r.value?r.value.chain_stats.tx_count+r.value.mempool_stats.tx_count:0),W=B(()=>r.value?r.value.chain_stats.funded_txo_sum+r.value.mempool_stats.funded_txo_sum:0),X=B(()=>r.value?r.value.chain_stats.spent_txo_sum+r.value.mempool_stats.spent_txo_sum:0),I=i=>{const e=n.calculateOutputTotal(i);return n.formatBTC(e)},D=i=>{F.push({name:"bitcoin-transaction",params:{txid:i}})},H=()=>{F.push({name:"home"})},J=()=>{r.value&&(q.value=!0)},K=async()=>{const i=O.params.address;k.value=!0,w.value=null;try{r.value=await n.getAddress(i),x.value=await n.getAddressTransactions(i),f.value=await n.getAddressUtxo(i),P.addSearch(i,"Address","bitcoin")}catch(e){console.error("Failed to load Bitcoin address:",e),w.value=e instanceof Error?e.message:"Failed to load address"}finally{k.value=!1}};return ee(async()=>{await K(),U=setInterval(()=>{if(k.value){const i=n.getQueueStatus();console.log(`Queue status: ${i.queueLength} pending`)}},500)}),te(()=>{U&&clearInterval(U)}),(i,e)=>(d(),v(re,{class:"bitcoin-address-page"},{default:a(()=>[k.value?(d(),v(ue,{key:0,message:E.value,onCancel:H},null,8,["message"])):m("",!0),t("div",ve,[r.value?(d(),c("div",pe,[t("div",_e,[s(L,{flat:"",round:"",icon:"mdi-arrow-left",onClick:e[0]||(e[0]=l=>i.$router.back()),class:"back-btn"}),e[3]||(e[3]=t("div",null,[t("h1",{class:"page-title"},"Bitcoin Address"),t("p",{class:"page-subtitle"},"Mainnet")],-1))]),s(h,{class:"address-card slide-up-soft",elevated:""},{default:a(()=>[s(g,null,{default:a(()=>[t("div",ge,[s(S,{src:C,width:"48px",height:"48px"}),t("div",he,[e[4]||(e[4]=t("div",{class:"address-label"},"Address",-1)),s(M,{color:"primary",address:r.value.address,"is-transaction-hash":!1,truncate:!0},null,8,["address"])]),s(L,{flat:"",round:"",icon:"mdi-qrcode",size:"md",color:"primary",onClick:J},{default:a(()=>[s(ie,null,{default:a(()=>[...e[5]||(e[5]=[_("Show QR",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),s(h,{class:"balance-card slide-up-soft stagger-1",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("div",be,[e[6]||(e[6]=t("h3",{class:"card-title"},"Balance",-1)),s(S,{src:C,width:"24px",height:"24px"})]),t("div",xe,[t("span",Be,o(u(n).formatBTC(V.value)),1),e[7]||(e[7]=t("span",{class:"balance-symbol"},"BTC",-1))]),V.value>0?(d(),c("div",Ce," ≈ "+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(V.value)),"BTC"))+" USD ",1)):m("",!0)]),_:1})]),_:1}),s(h,{class:"stats-card slide-up-soft stagger-2",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[e[12]||(e[12]=t("h3",{class:"card-title"},"Statistics",-1)),t("div",Te,[t("div",ke,[e[8]||(e[8]=t("div",{class:"stat-label"},"Total Transactions",-1)),t("div",ye,o(G.value),1)]),t("div",Se,[e[9]||(e[9]=t("div",{class:"stat-label"},"Total Received",-1)),t("div",Qe,o(u(n).formatBTC(W.value))+" BTC",1)]),t("div",qe,[e[10]||(e[10]=t("div",{class:"stat-label"},"Total Sent",-1)),t("div",we,o(u(n).formatBTC(X.value))+" BTC",1)]),t("div",Ue,[e[11]||(e[11]=t("div",{class:"stat-label"},"Unspent Outputs",-1)),t("div",Ve,o(f.value.length),1)])])]),_:1})]),_:1}),f.value.length>0?(d(),v(h,{key:0,class:"utxos-card slide-up-soft stagger-3",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("h3",Ae,[s(y,{name:"mdi-treasure-chest",size:"20px",color:"primary",class:"q-mr-sm"}),_(" Unspent Outputs ("+o(f.value.length)+") ",1)]),s(N,{separator:""},{default:a(()=>[(d(!0),c($,null,z(f.value.slice(0,10),(l,A)=>(d(),v(R,{key:A,class:"utxo-item"},{default:a(()=>[s(Q,null,{default:a(()=>[s(b,{class:"utxo-txid"},{default:a(()=>[s(M,{color:"primary",address:l.txid,"is-transaction-hash":!0,icon:"mdi-receipt-text",clickable:"",onClick:Y=>D(l.txid)},null,8,["address","onClick"])]),_:2},1024),s(b,{caption:"",class:"utxo-details"},{default:a(()=>[t("span",null,"Output #"+o(l.vout),1),e[13]||(e[13]=t("span",{class:"q-mx-sm"},"•",-1)),s(S,{src:C,width:"14px",height:"14px"}),t("strong",Fe,o(u(n).formatBTC(l.value))+" BTC",1),t("span",Ie,"("+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(l.value)),"BTC"))+" USD)",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),f.value.length>10?(d(),c("div",De," Showing 10 of "+o(f.value.length)+" UTXOs ",1)):m("",!0)]),_:1})]),_:1})):m("",!0),x.value.length>0?(d(),v(h,{key:1,class:"transactions-card slide-up-soft stagger-4",bordered:""},{default:a(()=>[s(g,null,{default:a(()=>[t("h3",Le,[s(y,{name:"mdi-swap-horizontal",size:"20px",color:"primary",class:"q-mr-sm"}),e[14]||(e[14]=_(" Recent Transactions ",-1))]),s(N,{separator:""},{default:a(()=>[(d(!0),c($,null,z(x.value.slice(0,10),(l,A)=>le((d(),v(R,{key:A,clickable:"",onClick:Y=>D(l.txid),class:"tx-item"},{default:a(()=>[s(Q,{avatar:""},{default:a(()=>[s(y,{name:l.status.confirmed?"mdi-check-circle":"mdi-clock-outline",color:l.status.confirmed?"positive":"warning",size:"32px"},null,8,["name","color"])]),_:2},1024),s(Q,null,{default:a(()=>[s(b,{class:"tx-txid"},{default:a(()=>[_(o(l.txid.substring(0,8))+"..."+o(l.txid.substring(l.txid.length-8)),1)]),_:2},1024),s(b,{caption:""},{default:a(()=>[l.status.block_time?(d(),c("span",$e,o(u(n).getTimeAgo(l.status.block_time)),1)):(d(),c("span",ze,"Unconfirmed"))]),_:2},1024)]),_:2},1024),s(Q,{side:""},{default:a(()=>[s(b,{class:"tx-value"},{default:a(()=>[s(S,{src:C,width:"16px",height:"16px"}),_(" "+o(I(l))+" BTC ",1),t("span",Re,"("+o(u(T).formatUsdValue(parseFloat(I(l)),"BTC"))+" USD)",1)]),_:2},1024),s(b,{caption:""},{default:a(()=>[_(" Fee: "+o(u(n).formatBTC(l.fee))+" BTC ",1),t("span",Ne,"("+o(u(T).formatUsdValue(parseFloat(u(n).formatBTC(l.fee)),"BTC"))+" USD)",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[oe]])),128))]),_:1}),x.value.length>10?(d(),c("div",Me," Showing 10 of "+o(x.value.length)+" transactions ",1)):m("",!0)]),_:1})]),_:1})):m("",!0)])):w.value?(d(),c("div",Oe,[s(h,{elevated:""},{default:a(()=>[s(g,{class:"text-center"},{default:a(()=>[s(y,{name:"mdi-alert-circle",size:"64px",color:"negative",class:"q-mb-md"}),e[15]||(e[15]=t("h3",{class:"text-h6 q-mb-sm"},"Address Not Found",-1)),s(ce,{label:"Go Back",icon:"mdi-arrow-left","bg-color":"#3b82f6","text-color":"#ffffff",onClick:e[1]||(e[1]=l=>i.$router.back())})]),_:1})]),_:1})])):m("",!0)]),r.value?(d(),v(me,{key:1,modelValue:q.value,"onUpdate:modelValue":e[2]||(e[2]=l=>q.value=l),address:r.value.address,"chain-name":"Bitcoin","chain-logo":u(C)},null,8,["modelValue","address","chain-logo"])):m("",!0)]),_:1}))}}),at=fe(Pe,[["__scopeId","data-v-30bff1e3"]]);export{at as default};
